webpackJsonp([14],{Am8Z:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var l=a("mvHQ"),o=a.n(l),s=a("PJh5"),i=a.n(s),n=(a("mw3O"),{methods:{handleDelMsg:function(e,t){console.log(e),console.log(t);var a=this,l=a.baseUrl+"whiteList/delete?id="+t.id;a.$confirm("此操作将永久删除该记录, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){a.$axios.get(l).then(function(e){console.log("白名单。。"),console.log(e.data),"0"==e.data.status?(a.$message({message:e.data.message,type:"success"}),a.getCarMsg()):a.$message({message:e.data.message,type:"info"})}).catch(function(e){return console.log(e)})}).catch(function(){a.$message({type:"info",message:"已取消删除"})})},editHMD:function(e){this.editHMD1="1"==e},hmdMsg:function(e){console.log(e),this.qfShow="1"==e},saveInsertMsg3:function(e){var t,a,l=this;l.pdCarColor(e.plateColor),console.log("val=================="),a=Number(e.plateColorName)?l.plateColorOptions[e.plateColorName-1].label:e.plateColorName,console.log(a),t={id:e.id,parkingId:e.parkingId,plateNo:e.plateNo,plateColorName:a,remark:e.remark};var o=l.baseUrl+"whiteList/update";l.$axios.post(o,t).then(function(e){console.log(e.data),"0"==e.data.status?(l.$message({message:e.data.message,type:"success"}),l.dialogVisible3=!1,l.getCarMsg()):l.$message({message:e.data.message,type:"info"})}).catch(function(e){return console.log(e)})},getCarColor:function(){var e=this,t=e.baseUrl+"vehicleInfo/plateColorList";e.$axios.get(t).then(function(t){if(e.plateColorOptionsShow=!0,"0"==t.data.status)for(var a=0;a<t.data.data.length;a++)e.plateColorOptions[a]={id:t.data.data[a].id,label:t.data.data[a].plateColor,value:t.data.data[a].plateColorNo}}).catch(function(e){console.log(e)})},pdCarColor:function(e){return!!Number(e)},addBlackList:function(e){this.dialogVisibleAddRule=!0},handleBJ:function(e){console.log(e);var t=this,a=t.baseUrl+"feeRule/update";e.feeRuleConfigs=e.scArr,t.$axios.post(a,e).then(function(e){console.log(e.data),t.$message({message:e.data.message,type:"info"}),t.dialogVisible3=!1}).catch(function(e){return console.log(e)})},cancelBJ:function(){this.dialogVisible3=!1},getCycleType:function(){var e=this,t=e.baseUrl+"feeRule/initCycleType";e.$axios.get(t).then(function(t){e.cycleTypeIdShow=!0;for(var a=0;a<t.data.data.length;a++)e.cycleTypeIdOption[a]={id:t.data.data[a].cycleTypeId,value:t.data.data[a].cycleTypeId,label:t.data.data[a].cycleTypeName};console.log(e.cycleTypeIdOption)}).catch(function(e){return console.log(e)})},saveEditMsg:function(e){var t=this,a=t.baseUrl+"feeRule/updateRuleForVehicleType",l={parkingId:t.changeMsgForm.parkingId,id:t.changeMsgForm.id,vehicleTypeId:t.changeMsgForm.vehicleTypeId,feeRuleId:t.changeMsgForm.feeRuleId};t.$axios.post(a,l).then(function(e){console.log(e.data),t.$message({message:e.data.message,type:"info"}),t.dialogVisible3=!1}).catch(function(e){console.log(e)})},cancel2:function(){this.dialogVisibleAddRule=!1},cancel3:function(){this.dialogVisible3=!1},saveInsertMsg:function(e){var t=this,a=t.baseUrl+"whiteList/add";if(console.log("看下数据"),console.log(e.plateColor),t.pdCarColor(e.plateColor)){var l={parkingId:t.addMsgForm.parkingId,plateNo:t.addMsgForm.plateNo,plateColorName:t.plateColorOptions[t.addMsgForm.plateColor-1].label,remark:t.addMsgForm.remark};t.$axios.post(a,l).then(function(e){console.log(e.data),"0"==e.data.status?(t.$message({message:e.data.message,type:"success"}),t.dialogVisibleAddRule=!1,t.search()):t.$message({message:e.data.message,type:"info"})}).catch(function(e){console.log(e)})}else t.$message({message:"请选择车牌颜色!",type:"info"})},addMsg:function(){this.dialogVisibleAddRule=!0},sendParkId:function(e){console.log(e),this.ruleType(e)},ruleType:function(e){var t=this;t.feeRuleIdOptionsShow=!1;var a=t.baseUrl+"feeRule/initRuleList/"+e;t.$axios.get(a).then(function(e){console.log("ruleType   res"),console.log(e.data.data),t.feeRuleIdOptionsShow=!0;for(var a=0;a<e.data.data.length;a++)t.feeRuleIdOptions[a]={id:e.data.data[a].id,label:e.data.data[a].feeRule,value:e.data.data[a].id};console.log(t.feeRuleIdOptions)}).catch(function(e){console.log(e)})},search:function(){var e={parkingId:this.getRuleForm.parkingId,currentPage:this.currentPage,pageSize:this.pageSize,plateNo:this.getRuleForm.plateNo,plateColorName:this.detailMsgForm.plateColor};this.axiosMsg(e)},cancel:function(){this.dialogVisible3=!1},getParkingId:function(){var e=this,t=e.baseUrl+"vehicleInfo/initParkingList?userId="+localStorage.getItem("userId");e.$axios.get(t).then(function(t){if(e.parkingIdOptionsShow=!0,"0"==t.data.status)for(var a=0;a<t.data.data.length;a++)e.parkingIdOptions[a]={id:t.data.data[a].id,label:t.data.data[a].parkingName,value:t.data.data[a].id}}).catch(function(e){console.log(e)})},saveMsg:function(e){console.log("this.detailForm2.plateColorNo"),console.log(this.detailForm2.vehicleType);var t={id:this.row.id,parkingId:this.detailForm2.parkingId,vehicleTypeId:String(this.detailForm2.vehicleType),plateNo:this.detailForm2.plateNo,plateColorNo:this.detailForm2.plateColorNo,plateColor:this.detailForm2.plateColor,vehicleModel:this.detailForm2.vehicleModel,vehicleOwner:this.detailForm2.vehicleOwner,ownerIdNo:this.detailForm2.ownerIdNo,ownerGender:this.detailForm2.ownerGender,ownerBirth:this.detailForm2.ownerBirth,ownerPhone:this.detailForm2.ownerPhone,ownerAddress:this.detailForm2.ownerAddress,rfidNo:this.detailForm2.rfidNo};this.axiosChangeCar(t)},axiosChangeCar:function(e){var t=this.baseUrl+"vehicleInfo/updateVehicle";this.$axios.post(t,e).then(function(e){console.log("res.data......."),console.log(e.data)}).catch(function(e){console.log(e)})},currentChange:function(e){this.getTime();this.currentPage=e;var t={parkingId:this.getRuleForm.parkingId,currentPage:this.currentPage,pageSize:this.pageSize,plateNo:this.getRuleForm.plateNo,plateColorName:this.detailMsgForm.plateColor},a=o()(t);this.axiosMsg(a)},handleSizeChange:function(e){this.pageSize=e;var t={parkingId:this.getRuleForm.parkingId,currentPage:this.currentPage,pageSize:this.pageSize,plateNo:this.getRuleForm.plateNo,plateColorName:this.detailMsgForm.plateColor},a=o()(t);this.axiosMsg(a),console.log("每页显示"+e+"条")},axiosMsg:function(e){var t=this;this.paginationShow=!0,this.$axios({method:"post",url:t.baseUrl+"whiteList/list",headers:{"Content-Type":"application/json"},data:e}).then(function(e){t.total=e.data.data.total,t.tableCar=e.data.data.records,console.log("response白名单..."),console.log(t.tableCar)}).catch(function(e){console.log(e)})},momentTime:function(e){return i()(e).format("YYYY-MM-DD HH:mm:ss")},momentTime1:function(e){return i()(e).format("YYYY-MM-DD")},getCarMsg:function(){var e={parkingId:this.getRuleForm.parkingId,pageSize:10,currentPage:1,plateNo:this.getRuleForm.plateNo,plateColorName:this.detailMsgForm.plateColor},t=o()(e);this.axiosMsg(t)},handleDetailMsg:function(e,t,a){var l=this;this.dialogVisible3=!0,l.sfgzRow=t,console.log("row.编辑.."),console.log(t);var o=l.baseUrl+"whiteList/detail?id="+t.id;l.$axios.get(o).then(function(e){l.changeMsgForm=e.data.data})},handleChangeMsg:function(e,t,a){var l=this;l.dialogVisible2=!0;var o=l.baseUrl+"whiteList/detail?id="+t.id;l.$axios.get(o).then(function(e){l.detailMsgForm=e.data.data,console.log("测试数据"),console.log(e.data.data),l.detailMsgForm.plateColor=String(e.data.data.plateColorName),"1"==e.data.data.blackType?l.xqShow=!0:l.xqShow=!1})}},data:function(){return{editHMD1:!1,xqShow:!1,qfShow:!1,blackTypeOptions:[{id:1,label:"逃费",value:1},{id:2,label:"套牌",value:2}],plateColorOptionsShow:!1,plateColorOptions:[],sfgzRow:[],cycleTypeIdOption:[],scArrShow:!1,statusOptions:[{id:1,value:1,label:"正常"},{id:0,value:0,label:"停用"}],getRuleForm:{},parkingIdOptions:[],parkingIdOptionsShow:!1,feeRuleIdOptionsShow:!1,feeRuleIdOptions:[],vehicleTypeOptions:[],vehicleTypeOptionsShow:!1,currentPage:1,total:0,tableCar:[],paginationShow:!1,pageSize:10,dialogVisible2:!1,detailMsgForm:{scArr:[]},changeMsgForm:{scArr:[]},dialogVisible3:!1,addMsgForm:{},dialogVisibleAddRule:!1,rowMsg:{}}},mounted:function(){this.getParkingId(),this.getCycleType(),this.getCarMsg(),this.getCarColor()}}),r={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-form",{model:{value:e.getRuleForm,callback:function(t){e.getRuleForm=t},expression:"getRuleForm"}},[a("el-row",[a("el-col",{attrs:{span:5}},[a("el-form-item",{staticClass:"laeblStyle",attrs:{label:"车场名称"}},[a("el-select",{directives:[{name:"show",rawName:"v-show",value:e.parkingIdOptionsShow,expression:"parkingIdOptionsShow"}],staticClass:"handle-input",attrs:{clearable:""},model:{value:e.getRuleForm.parkingId,callback:function(t){e.$set(e.getRuleForm,"parkingId",t)},expression:"getRuleForm.parkingId"}},e._l(e.parkingIdOptions,function(e){return a("el-option",{key:e.id,attrs:{label:e.label,value:e.value}})}))],1)],1),e._v(" "),a("el-col",{attrs:{span:5}},[a("el-form-item",{staticClass:"laeblStyle",attrs:{label:"车牌号"}},[a("el-input",{staticClass:"handle-input",attrs:{clearable:""},model:{value:e.getRuleForm.plateNo,callback:function(t){e.$set(e.getRuleForm,"plateNo",t)},expression:"getRuleForm.plateNo"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:5}},[a("el-form-item",{staticClass:"laeblStyle",attrs:{label:"车牌颜色",prop:"plateColor"}},[e.plateColorOptionsShow?a("el-select",{staticClass:"handle-input",attrs:{clearable:""},model:{value:e.detailMsgForm.plateColorName,callback:function(t){e.$set(e.detailMsgForm,"plateColorName",t)},expression:"detailMsgForm.plateColorName"}},e._l(e.plateColorOptions,function(e){return a("el-option",{key:e.id,attrs:{label:e.label,value:e.value}})})):e._e()],1)],1),e._v(" "),a("el-col",{attrs:{span:2}},[e._v(" ")]),e._v(" "),a("el-col",{attrs:{span:2}},[a("el-button",{staticClass:"el-button el-button--primary",attrs:{type:"button"},on:{click:function(t){e.addBlackList(e.detailMsgForm)}}},[e._v("\n                新增\n              ")])],1),e._v(" "),a("el-col",{attrs:{span:2}},[a("el-button",{staticClass:"el-button el-button--primary",attrs:{type:"button"},on:{click:function(t){e.getCarMsg()}}},[e._v("\n                查询\n              ")])],1)],1)],1),e._v(" "),a("el-table",{staticStyle:{width:"100%",padding:"20px"},attrs:{data:e.tableCar}},[a("el-table-column",{attrs:{prop:"id",label:"id"}}),e._v(" "),a("el-table-column",{attrs:{prop:"parkingName",label:"车场名称"}}),e._v(" "),a("el-table-column",{attrs:{prop:"plateNo",label:"车牌号"}}),e._v(" "),a("el-table-column",{attrs:{prop:"plateColorName",label:"车牌颜色"}}),e._v(" "),a("el-table-column",{attrs:{prop:"remark",label:"备注"}}),e._v(" "),a("el-table-column",{attrs:{label:"操作",width:"300"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(a){e.handleChangeMsg(t.$index,t.row)}}},[e._v("查看\n      ")]),e._v(" "),a("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(a){e.handleDetailMsg(t.$index,t.row)}}},[e._v("编辑\n      ")]),e._v(" "),a("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(a){e.handleDelMsg(t.$index,t.row)}}},[e._v("删除\n      ")])]}}])})],1),e._v(" "),a("el-pagination",{directives:[{name:"show",rawName:"v-show",value:e.paginationShow,expression:"paginationShow"}],staticStyle:{"margin-top":"10px"},attrs:{background:"",layout:"total,sizes,prev,pager,next,jumper",total:e.total,"page-size":e.pageSize,"page-sizes":[5,10,20,30],"current-page":e.currentPage},on:{"size-change":e.handleSizeChange,"current-change":e.currentChange}}),e._v(" "),a("el-dialog",{attrs:{title:"详情信息",visible:e.dialogVisible2,width:"1100px"},on:{"update:visible":function(t){e.dialogVisible2=t}}},[a("el-card",{staticClass:"box-card box-card-ex"},[a("el-form",{attrs:{disabled:""},model:{value:e.detailMsgForm,callback:function(t){e.detailMsgForm=t},expression:"detailMsgForm"}},[a("el-row",[a("el-col",{attrs:{span:7}},[a("el-form-item",{attrs:{label:"车场名称"}},[a("el-select",{directives:[{name:"show",rawName:"v-show",value:e.parkingIdOptionsShow,expression:"parkingIdOptionsShow"}],staticClass:"handle-input",attrs:{clearable:""},model:{value:e.detailMsgForm.parkingId,callback:function(t){e.$set(e.detailMsgForm,"parkingId",t)},expression:"detailMsgForm.parkingId"}},e._l(e.parkingIdOptions,function(e){return a("el-option",{key:e.id,attrs:{label:e.label,value:e.value}})}))],1)],1),e._v(" "),a("el-col",{attrs:{span:1}},[e._v("\n                   \n                ")]),e._v(" "),a("el-col",{attrs:{span:7}},[a("el-form-item",{staticClass:"laeblStyle",attrs:{label:"车牌号"}},[a("el-input",{staticClass:"handle-input",model:{value:e.detailMsgForm.plateNo,callback:function(t){e.$set(e.detailMsgForm,"plateNo",t)},expression:"detailMsgForm.plateNo"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:1}},[e._v("\n                     \n                  ")]),e._v(" "),a("el-col",{attrs:{span:7}},[a("el-form-item",{staticClass:"laeblStyle",attrs:{label:"车牌颜色",prop:"plateColor"}},[e.plateColorOptionsShow?a("el-select",{staticClass:"handle-input",model:{value:e.detailMsgForm.plateColor,callback:function(t){e.$set(e.detailMsgForm,"plateColor",t)},expression:"detailMsgForm.plateColor"}},e._l(e.plateColorOptions,function(e){return a("el-option",{key:e.id,attrs:{label:e.label,value:e.value}})})):e._e()],1)],1)],1),e._v(" "),a("el-row",[a("el-col",{attrs:{span:1}},[e._v("\n                   \n                ")])],1),e._v(" "),a("el-row",[a("el-col",{attrs:{span:10}},[a("el-form-item",{staticStyle:{"text-align":"right"},attrs:{label:"备注"}},[a("el-input",{staticStyle:{width:"75%"},attrs:{type:"textarea",rows:2},model:{value:e.detailMsgForm.remark,callback:function(t){e.$set(e.detailMsgForm,"remark",t)},expression:"detailMsgForm.remark"}})],1)],1)],1)],1)],1)],1),e._v(" "),a("el-dialog",{attrs:{title:"详情信息",visible:e.dialogVisible3,width:"1100px"},on:{"update:visible":function(t){e.dialogVisible3=t}}},[a("el-card",{staticClass:"box-card box-card-ex"},[a("el-form",{model:{value:e.changeMsgForm,callback:function(t){e.changeMsgForm=t},expression:"changeMsgForm"}},[a("el-row",[a("el-col",{attrs:{span:7}},[a("el-form-item",{attrs:{label:"车场名称"}},[a("el-select",{directives:[{name:"show",rawName:"v-show",value:e.parkingIdOptionsShow,expression:"parkingIdOptionsShow"}],staticClass:"handle-input",attrs:{clearable:""},model:{value:e.changeMsgForm.parkingId,callback:function(t){e.$set(e.changeMsgForm,"parkingId",t)},expression:"changeMsgForm.parkingId"}},e._l(e.parkingIdOptions,function(e){return a("el-option",{key:e.id,attrs:{label:e.label,value:e.value}})}))],1)],1),e._v(" "),a("el-col",{attrs:{span:1}},[e._v("\n                   \n                ")]),e._v(" "),a("el-col",{attrs:{span:7}},[a("el-form-item",{staticClass:"laeblStyle",attrs:{label:"车牌号"}},[a("el-input",{staticClass:"handle-input",model:{value:e.changeMsgForm.plateNo,callback:function(t){e.$set(e.changeMsgForm,"plateNo",t)},expression:"changeMsgForm.plateNo"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:1}},[e._v("\n                     \n                  ")]),e._v(" "),a("el-col",{attrs:{span:7}},[a("el-form-item",{staticClass:"laeblStyle",attrs:{label:"车牌颜色",prop:"plateColor"}},[e.plateColorOptionsShow?a("el-select",{staticClass:"handle-input",model:{value:e.changeMsgForm.plateColorName,callback:function(t){e.$set(e.changeMsgForm,"plateColorName",t)},expression:"changeMsgForm.plateColorName"}},e._l(e.plateColorOptions,function(e){return a("el-option",{key:e.id,attrs:{label:e.label,value:e.value}})})):e._e()],1)],1)],1),e._v(" "),a("el-row",[a("el-col",{attrs:{span:10}},[a("el-form-item",{attrs:{label:"备注"}},[a("el-input",{staticStyle:{width:"70%","margin-left":"20px"},attrs:{type:"textarea",rows:2},model:{value:e.changeMsgForm.remark,callback:function(t){e.$set(e.changeMsgForm,"remark",t)},expression:"changeMsgForm.remark"}})],1)],1)],1),e._v(" "),a("div",{staticStyle:{float:"right",margin:"20px 5% 0 0"}},[a("el-button",{staticClass:"el-button el-button--warning",staticStyle:{"margin-right":"30px",width:"80px"},on:{click:function(t){e.cancel3()}}},[e._v("取消")]),e._v(" "),a("el-button",{staticClass:"el-button el-button--primary",staticStyle:{width:"80px"},on:{click:function(t){e.saveInsertMsg3(e.changeMsgForm)}}},[e._v("保存29")])],1),e._v(" "),a("div",{staticStyle:{clear:"both"}})],1)],1)],1),e._v(" "),a("el-dialog",{attrs:{title:"新增白名单",visible:e.dialogVisibleAddRule,width:"60%"},on:{"update:visible":function(t){e.dialogVisibleAddRule=t}}},[a("el-card",{staticClass:"box-card box-card-ex"},[a("el-form",{model:{value:e.addMsgForm,callback:function(t){e.addMsgForm=t},expression:"addMsgForm"}},[a("el-row",[a("el-col",{attrs:{span:7}},[a("el-form-item",{attrs:{label:"车场名称"}},[a("el-select",{directives:[{name:"show",rawName:"v-show",value:e.parkingIdOptionsShow,expression:"parkingIdOptionsShow"}],staticClass:"handle-input",attrs:{clearable:""},model:{value:e.addMsgForm.parkingId,callback:function(t){e.$set(e.addMsgForm,"parkingId",t)},expression:"addMsgForm.parkingId"}},e._l(e.parkingIdOptions,function(e){return a("el-option",{key:e.id,attrs:{label:e.label,value:e.value}})}))],1)],1),e._v(" "),a("el-col",{attrs:{span:1}},[e._v("\n               \n            ")]),e._v(" "),a("el-col",{attrs:{span:7}},[a("el-form-item",{staticClass:"laeblStyle",attrs:{label:"车牌号"}},[a("el-input",{staticClass:"handle-input",model:{value:e.addMsgForm.plateNo,callback:function(t){e.$set(e.addMsgForm,"plateNo",t)},expression:"addMsgForm.plateNo"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:1}},[e._v("\n                 \n              ")]),e._v(" "),a("el-col",{attrs:{span:7}},[a("el-form-item",{staticClass:"laeblStyle",attrs:{label:"车牌颜色",prop:"plateColor"}},[e.plateColorOptionsShow?a("el-select",{staticClass:"handle-input",model:{value:e.addMsgForm.plateColor,callback:function(t){e.$set(e.addMsgForm,"plateColor",t)},expression:"addMsgForm.plateColor"}},e._l(e.plateColorOptions,function(e){return a("el-option",{key:e.id,attrs:{label:e.label,value:e.value}})})):e._e()],1)],1)],1),e._v(" "),a("el-row",[a("el-col",{attrs:{span:10}},[a("el-form-item",{attrs:{label:"备注"}},[a("el-input",{staticStyle:{width:"70%","margin-left":"20px"},attrs:{type:"textarea",rows:2},model:{value:e.addMsgForm.remark,callback:function(t){e.$set(e.addMsgForm,"remark",t)},expression:"addMsgForm.remark"}})],1)],1)],1),e._v(" "),a("div",{staticStyle:{float:"right",margin:"20px 5% 0 0"}},[a("el-button",{staticClass:"el-button el-button--warning",staticStyle:{"margin-right":"30px",width:"80px"},on:{click:function(t){e.cancel2()}}},[e._v("取消")]),e._v(" "),a("el-button",{staticClass:"el-button el-button--primary",staticStyle:{width:"80px"},on:{click:function(t){e.saveInsertMsg(e.addMsgForm)}}},[e._v("保存77")])],1),e._v(" "),a("div",{staticStyle:{clear:"both"}})],1)],1)],1)],1)},staticRenderFns:[]};var c=a("VU/8")(n,r,!1,function(e){a("V54f")},"data-v-4f69d04b",null);t.default=c.exports},V54f:function(e,t){}});
//# sourceMappingURL=14.e7773b15d1b657e22cc4.js.map