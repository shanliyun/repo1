webpackJsonp([15],{D5hD:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var l=a("PJh5"),i=a.n(l),n=(a("mw3O"),a("YvBo")),o={methods:{delRule:function(e,t){this.getRuleForm.ruleArr.splice(e,1)},addSD:function(){this.getRuleForm.ruleArr.push({mean:"添加"})},getCycleType:function(){var e=this;n.c().then(function(t){e.cycleTypeIdShow=!0;for(var a=0;a<t.data.data.length;a++)e.cycleTypeIdOption[a]={id:t.data.data[a].cycleTypeId,value:t.data.data[a].cycleTypeId,label:t.data.data[a].cycleTypeName}}).catch(function(e){return console.log(e)})},saveEditMsg:function(e){console.log(e);for(var t=this,a=t.baseUrl+"feeRule/addFeeRule",l=[],i=0;i<t.getRuleForm.ruleArr.length;i++)l[i]={indexNum:i+1,startMin:t.getRuleForm.ruleArr[i].startMin,endMin:t.getRuleForm.ruleArr[i].endMin,cycleTypeId:t.getRuleForm.ruleArr[i].cycleTypeId,cycleFee:t.getRuleForm.ruleArr[i].cycleFee};var n={parkingId:e.parkingId,feeRuleName:e.feeRuleName,feeRuleConfigs:l,maxFee:e.maxFee?e.maxFee*=100:e.maxFee="0"};console.log(n),t.$axios.post(a,n).then(function(e){"0"==e.data.status?t.$message({message:e.data.message,type:"success"}):t.$message({message:e.data.message,type:"info"})}).catch(function(e){return console.log(e)})},cancel:function(){this.dialogVisible2=!1},getCarType:function(){var e=this,t=e.baseUrl+"vehicleInfo/initVehicleTypeList";e.$axios.get(t).then(function(t){if(e.vehicleTypeOptionsShow=!0,"0"==t.data.status)for(var a=0;a<t.data.data.length;a++)e.vehicleTypeOptions[a]={id:t.data.data[a].id,label:t.data.data[a].vehicleType,value:t.data.data[a].id}}).catch(function(e){console.log(e)})},getParkingId:function(){var e=this;n.g(localStorage.getItem("userId")).then(function(t){if("0"==t.data.status){for(var a=0;a<t.data.data.length;a++)e.parkingIdOptions[a]={id:t.data.data[a].id,label:t.data.data[a].parkingName,value:t.data.data[a].id};e.$forceUpdate()}}).catch(function(e){console.log(e)})},momentTime:function(e){return i()(e).format("YYYY-MM-DD HH:mm:ss")},momentTime1:function(e){return i()(e).format("YYYY-MM-DD")}},data:function(){return{cycleTypeIdShow:!1,cycleTypeIdOption:[],getRuleForm:{ruleArr:[]},parkingIdOptions:[],parkingIdOptionsShow:!1,feeRuleIdOptionsShow:!1,feeRuleIdOptions:[],vehicleTypeOptions:[],vehicleTypeOptionsShow:!1,currentPage:1,total:0,tableCar:[],paginationShow:!1,pageSize:10,dialogVisible2:!1,detailMsgForm:{},includeFreeOptinos:[{id:1,value:0,label:"不包含"},{id:2,value:1,label:"包含"}],dialogVisibleAS:!1,acMsgForm:{},dialogVisibleEditAS:!1,editMsgForm:{},dialogVisibleEditAC:!1,editACForm:{}}},mounted:function(){this.getParkingId(),this.getCycleType()}},r={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-form",{model:{value:e.getRuleForm,callback:function(t){e.getRuleForm=t},expression:"getRuleForm"}},[a("el-card",{staticClass:"box-card box-card-ex",staticStyle:{"margin-bottom":"20px"}},[a("div",{staticClass:"clearfix",staticStyle:{"text-align":"left"},attrs:{slot:"header"},slot:"header"},[a("b",[e._v("新增收费规则")])]),e._v(" "),a("div",{staticClass:"box-card-ex"},[a("el-row",[a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"车场名称"}},[a("el-select",{staticStyle:{width:"60%"},attrs:{clearable:""},model:{value:e.getRuleForm.parkingId,callback:function(t){e.$set(e.getRuleForm,"parkingId",t)},expression:"getRuleForm.parkingId"}},e._l(e.parkingIdOptions,function(e){return a("el-option",{key:e.id,attrs:{label:e.label,value:e.value}})}))],1)],1),e._v(" "),a("el-col",{attrs:{span:2}},[e._v("\r\n                   \r\n                ")]),e._v(" "),a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"收费规则名称"}},[a("el-input",{staticStyle:{width:"60%"},model:{value:e.getRuleForm.feeRuleName,callback:function(t){e.$set(e.getRuleForm,"feeRuleName",t)},expression:"getRuleForm.feeRuleName"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:4}},[a("b",[e._v("添加时段")]),e._v(" "),a("el-button",{attrs:{icon:"el-icon-plus",type:"primary"},on:{click:e.addSD}})],1)],1),e._v(" "),e._l(e.getRuleForm.ruleArr,function(t,l){return a("div",[a("el-row",{staticStyle:{position:"relative"}},[a("el-col",{attrs:{span:5}},[a("el-form-item",{attrs:{label:"时长开始 (分钟)"}},[a("el-input",{staticClass:"sjInput",model:{value:t.startMin,callback:function(a){e.$set(t,"startMin",a)},expression:"item.startMin"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:1}},[e._v("\r\n                 \r\n              ")]),e._v(" "),a("el-col",{attrs:{span:5}},[a("el-form-item",{attrs:{label:"时长结束 (分钟)"}},[a("el-input",{staticClass:"sjInput",model:{value:t.endMin,callback:function(a){e.$set(t,"endMin",a)},expression:"item.endMin"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:1}},[e._v("\r\n                   \r\n                ")]),e._v(" "),a("el-col",{attrs:{span:5}},[a("el-form-item",{attrs:{label:"周期类型"}},[e.cycleTypeIdShow?a("el-select",{staticStyle:{width:"160px"},model:{value:t.cycleTypeId,callback:function(a){e.$set(t,"cycleTypeId",a)},expression:"item.cycleTypeId"}},e._l(e.cycleTypeIdOption,function(e){return a("el-option",{key:e.id,attrs:{value:e.value,label:e.label}})})):e._e()],1)],1),e._v(" "),a("el-col",{attrs:{span:1}},[e._v("\r\n                   \r\n                ")]),e._v(" "),a("el-col",{attrs:{span:4}},[a("el-form-item",{attrs:{label:"周期金额(元)"}},[a("el-input",{staticClass:"sjInput",model:{value:t.cycleFee,callback:function(a){e.$set(t,"cycleFee",a)},expression:"item.cycleFee"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:1}},[e._v("\r\n                   \r\n                ")]),e._v(" "),a("el-button",{staticStyle:{position:"absolute",right:"10px",top:"0"},attrs:{icon:"el-icon-minus",type:"danger"},on:{click:function(a){e.delRule(l,t)}}})],1)],1)}),e._v(" "),a("el-row",[a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"最高金额(元)"}},[a("el-input",{staticStyle:{width:"60%"},model:{value:e.getRuleForm.maxFee,callback:function(t){e.$set(e.getRuleForm,"maxFee",t)},expression:"getRuleForm.maxFee"}})],1)],1)],1),e._v(" "),a("div",{staticStyle:{float:"right",margin:"20px 20% 0 0"}},[a("el-button",{staticClass:"el-button el-button--primary",staticStyle:{width:"80px"},on:{click:function(t){e.saveEditMsg(e.getRuleForm)}}},[e._v("添加")])],1),e._v(" "),a("div",{staticStyle:{clear:"both"}})],2)])],1)],1)},staticRenderFns:[]};var s=a("VU/8")(o,r,!1,function(e){a("kJ54")},"data-v-4a9b7fe7",null);t.default=s.exports},kJ54:function(e,t){}});
//# sourceMappingURL=15.7b46c3e44e2c7805339f.js.map